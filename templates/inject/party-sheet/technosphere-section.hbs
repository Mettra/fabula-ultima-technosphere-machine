<div class="tab" data-tab="technosphere-machine">
    {{#if isGM}}
    <fieldset class="section-container title-fieldset desc resource-content">
        <legend class="resource-label-m">
            Technosphere Machine Settings (GM)
        </legend>
        <div class="header-fields grid grid-9col" style="margin: 5px 0;">
            <label for="ts-sphere-table" style="grid-column: span 2;">Roll Table UUID</label>
            <input type="text" id="ts-sphere-table" name="ts-sphere-table" value="{{rollableTable}}" style="grid-column: span 6;" data-dtype="RollTable" />
            <a class="clear-button" id="clear-ts-sphere-table" title="Clear Roll Table UUID" style="grid-column: span 1; text-align: center; cursor: pointer; line-height: inherit;">&#10006;</a>
        </div>
    {{/if}}
    </fieldset>
    <fieldset class="section-container title-fieldset desc resource-content">
        <legend class="resource-label-m">
            Technosphere Machine
        </legend>
        <div class="memnosphere-selection-area" style="margin: 5px 0;">
            <label class="resource-label" style="display: block; margin-bottom: 8px; font-weight: bold;">Select Memnosphere:</label>
            <div class="memnosphere-grid">
                {{!-- "Create New Memnosphere" card --}}
                <div class="memnosphere-card item-card interactive {{#unless existingSphere}}selected{{/unless}}" data-uuid="" data-action="selectMemnosphere" title="Create New Memnosphere">
                    <div class="plate border">
                        <div class="name" style="text-align: center; font-weight: bold;">Create New</div>
                        <i class="fas fa-plus-circle" style="font-size: 2.5em; display: block; text-align: center; margin-top: 8px;"></i>
                    </div>
                </div>

                {{!-- Existing Memnosphere cards --}}
                {{#each memnosphereList}}
                    <div class="memnosphere-card item-card interactive {{#if (eq ../existingSphere this.item.uuid)}}selected{{/if}}" data-uuid="{{this.item.uuid}}" data-action="selectMemnosphere" title="{{this.item.name}}">
                        <div class="plate border">
                            <img class="img" src="{{this.item.img}}" />
                            <div class="name">{{this.item.name}}</div>

                            <div class="abilities">
                                {{#each this.sphere.abilities}}
                                    <div class="ability" title="{{this.name}} : {{this.rank}} / {{this.maxRank}}">
                                        <img class="img" src="{{this.img}}" alt="{{this.name}}" />

                                        {{#unless (eq this.maxRank 1) }}
                                        <div class="ability-rank-dots" data-rank="{{this.rank}}">
                                            {{#times this.maxRank }}
                                            <span class="rank-dot"></span>
                                            {{/times}}
                                        </div>
                                        {{/unless}}
                                    </div>
                                {{/each}}
                            </div>
                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
        <div style="margin-top: 10px;">
            <button type="button" class="technosphere-roll button button-style" style="width: 100%;">
                <i class="icon ra ra-dice-five"></i> Roll Memnosphere
            </button>
        </div>
    </fieldset>
</div>
